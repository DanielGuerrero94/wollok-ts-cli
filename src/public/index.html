<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Object Diagram</title>
  <script>var exports = {};</script>
  <script type="module" src="../diagram.js"></script>
  <!--<script type="module" src="socket.js"></script>-->
</head>

<body>
  <h1>Hello World!</h1>
  We are using Node.js <span id="node-version"></span>,
  Chromium <span id="chrome-version"></span>,
  and Electron <span id="electron-version"></span>.
  <img src="wollok.ico" />
  <div>
    Pings recibidos: <span id="pings">0</span>
  </div>
  <button id="sendPong">MANDAR PONG</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.min.js"></script>
  
  <!--<script src="http://localhost:3000/socket.io/socket.io.js"></script>-->
  <!--<script src="socket.io/socket.io.js"></script>-->
  <script>
    const socket = io('http://localhost:3000')
    /*window.onload= function(){
      var socket = io('http://localhost:3000');
    }*/
    socket.on('connect', function () { console.log("conectado!") })
    socket.on('event', function (data) { console.log(`evento! ${data}`) })
    socket.on('disconnect', function () { console.log("desconectado!") })

    const button = document.getElementById('sendPong')
    const label = document.getElementById('pings')

    button.addEventListener('click', e => {
      console.log("Sending Pong!")
      e.preventDefault()
      socket.emit('pong', Number(label.innerText))
    })

    socket.on('ping', payload => {
      console.log(`Received ping from server with value: ${payload}`)
      label.innerText = `${payload}`
    })

  </script>

  <div id="cy"></div>
  <input id="object" type="text">
  <input id="relation" type="text">
  <button id="btn">conect</button>
  <style>
      #cy {
          width: 90vw;
          height: 85vh;
          display: block;
      }
  </style>
</body>

</html>